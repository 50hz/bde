<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BSL 2.20 OSS: bdldfp_decimalimplutil Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bdldfp_decimalimplutil<br/>
<small>
[<a class="el" href="group__bdldfp.html">Package bdldfp</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide utilities to help implement decimal floating-point types.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebdldfp.html">bdldfp</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Macros</a> </li>
<li>
<a href="#4">Description</a> <ul>
<li>
<a href="#4.1">Usage</a> <ul>
<li>
<a href="#4.1.1">Example 1: Parse a decimal floating point literal</a> </li>
</ul>
</li>
<li>
<a href="#4.2">Example 2: Create a 64-bit decimal floating point with possible adjustment</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide utilities to help implement decimal floating-point types. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="structbdldfp_1_1DecimalImplUtil.html">bdldfp::DecimalImplUtil</a> </td><td>Namespace for decimal FP implementation functions  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="macros"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Macros: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td>BDLDFP_DECIMALIMPLUTIL_DF </td><td>ValueType32 from literal  </td></tr>
<tr>
<td>BDLDFP_DECIMALIMPLUTIL_DD </td><td>ValueType64 from literal  </td></tr>
<tr>
<td>BDLDFP_DECIMALIMPLUTIL_DL </td><td>ValueType128 from literal  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__bdldfp__decimal.html" title="Provide IEEE-754 decimal floating-point types.">Component bdldfp_decimal</a>, <a class="el" href="group__bdldfp__decimalplatform.html" title="Provide decimal floating-point platform information macros.">Component bdldfp_decimalplatform</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="4"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<p>This component is for internal use only by the <code>bdldfp_decimal*</code> components. Direct use of any names declared in this component by any other code invokes undefined behavior. In other words: this code may change, disappear, break, move without notice, and no support whatsoever will ever be provided for it. </p>
<dl class="user"><dt><b></b></dt><dd>This component contains: </dd></dl>
<dl class="user"><dt><b></b></dt><dd><ul>
<li>
portable decimal floating-point macros that create the implementation type (C99 or <code>decNumber</code> library)  </li>
<li>
the decimal floating-point environment/context for <code>decNumber</code> library (when it is used)  </li>
<li>
the definitions of the implementation types (to be used, e.g., as members in the <code>DecimalN</code> types)  </li>
<li>
the parsing functions that turn literals into values on platforms that do not yet support decimal floating-point literals, and possibly to use by stream input operators.  </li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="4.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section shows the intended use of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_parse_a_decimal_floating_point_literal"></a> <a class="anchor" id="usage.example_1~3A_parse_a_decimal_floating_point_literal"></a> <a class="anchor" id="description.usage.example_1~3A_parse_a_decimal_floating_point_literal"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="4.1.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Parse a decimal floating point literal: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Decimal floating points are used to represent numbers for which the exact decimal representation is known and we wish to avoid rounding errors that are introduced when the number is represented in binary. It is sometimes of interest to create a decimal floating point value from its string representation. The functions of this component allow us to work with types for which we may create representations for 32-, 64-, and 128-bit decimal floating point values. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>As an example, one mile is equal to <code>1.6093</code> kilometers exactly. First, we create the 64-bit pattern for the 64-bit decimal floating point value of <code>1.6093</code>. <br/>
<br/>
<div class="fragment"><pre class="fragment"> BloombergLP::bdldfp::DecimalImplUtil::ValueType64 kilometersPerMile =
     BloombergLP::bdldfp::DecimalImplUtil::parse64(<span class="stringliteral">&quot;1.6093&quot;</span>);
</pre></div><br/>
<br/>
 Now, if a mantissa and an exponent within range of the decimal floating point type are given, we can also create the decimal floating point value of interest with the functions of ''makeDecimalRawXX. For example, the 32-bit decimal floating point type can store 7 mantissa digits and has an exponent range of <code>-101</code> to <code>90</code> inclusive. It therefore may fit a mantissa of <code>16093</code> and an exponent of <code>-4</code>, representing the value of <code>1.6093</code> (<code>16093</code> times ten to the power of <code>-4</code>). We create this value using <code>makeDecimalRaw32</code>. <br/>
<br/>
<div class="fragment"><pre class="fragment"> BloombergLP::bdldfp::DecimalImplUtil::ValueType32
     kilometersPerMileMakeDecimal =
         BloombergLP::bdldfp::DecimalImplUtil::makeDecimalRaw32(16093, -4);
</pre></div><br/>
<br/>
 Finally, we verify that we obtain the same result without introducing rounding errors with both implementations. <br/>
<br/>
<div class="fragment"><pre class="fragment"> assert(BloombergLP::bdldfp::DecimalImplUtil::equals(kilometersPerMile,
      kilometersPerMileMakeDecimal));
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_2~3A_create_a_64-bit_decimal_floating_point_with_possible_adjustment"></a> <a class="anchor" id="description.example_2~3A_create_a_64-bit_decimal_floating_point_with_possible_adjustment"></a> <a class="anchor" id="example_2"></a> <a class="anchor" id="description.example_2"></a> <a class="anchor" id="4.2"></a> </dd></dl>
<dl class="user"><dt><b>Example 2: Create a 64-bit decimal floating point with possible adjustment: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><ul>
<li>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Suppose we want to create a <code><a class="el" href="namespacebdldfp.html#a5f13b247a3f13e3bffda9cfe51ee5845">bdldfp::Decimal64</a></code>, but have a mantissa and/or the exponent that is out of the range that can be exactly represented by a 64-bit decimal floating point type. Notice that a 64-bit decimal floating point value may represent a mantissa of up to 16 figures, and an exponent between <code>-6176</code> and <code>6111</code> inclusive. For example, on February 13, 2014, the US National Debt in Japanese Yen is approximately <code>1,765,002,361,949,679.79</code> Japanese Yen. This number can be represented with a mantissa of <code>176500236194967979</code> and an exponent of <code>-2</code>. First, we create this number. <br/>
<br/>
<div class="fragment"><pre class="fragment"> BloombergLP::bdldfp::DecimalImplUtil::ValueType64 usNationalDebtInJpy =
     BloombergLP::bdldfp::DecimalImplUtil::makeDecimal64(
         176500236194967979ull, -2);
</pre></div><br/>
<br/>
 Notice that <code>176500236194967979</code> contains 18 significant figures, more than can be represented by a 64-bit decimal floating point type. </li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd>Now, the number can also be parsed as a string. <br/>
<br/>
<div class="fragment"><pre class="fragment"> BloombergLP::bdldfp::DecimalImplUtil::ValueType64
     usNationalDebtInJpyParse =
        BloombergLP::bdldfp::DecimalImplUtil::parse64(<span class="stringliteral">&quot;1765002361949679.79&quot;</span>);
</pre></div><br/>
<br/>
 Finally, we verify that we obtain the same result. <br/>
<br/>
<div class="fragment"><pre class="fragment"> assert(BloombergLP::bdldfp::DecimalImplUtil::equals(usNationalDebtInJpy,
      usNationalDebtInJpyParse));
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Apr 7 2014 20:26:32 for BDE Release 2.20 OSS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
